library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
use_python("/Users/pokepoke4/anaconda3/bin/python", required = TRUE)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
use_python("/usr/local/bin/python3", required = TRUE)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
use_python("/usr/local/bin/python", required = TRUE)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
# TODO
(d1 <- mdy(d1))
d1 <- "January 1, 2010"
d2 <- "2015-Mar-07"
d3 <- "06-Jun-2017"
d4 <- c("August 19 (2015)", "July 1 (2015)")
d5 <- "12/30/14" # Dec 30, 2014
# TODO
(d1 <- mdy(d1))
(d2 <- ymd(d2))
(d3 <- dmy(d3))
(d4 <- mdy(d4))
(d5 <- mdy(d5))
#TODO
all_leap_year <- gapminder %>%
filter(leap_year(year))
unique(all_leap_year$year)
py_config()
library(reticulate)
use_python('/usr/local/bin/python3', required = TRUE)
py_config()
knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(gapminder)
library(nycflights13)
library(lubridate)
library(reticulate)
use_python('/usr/local/bin/python3', required = TRUE)
py_config()
d1 <- "January 1, 2010"
d2 <- "2015-Mar-07"
d3 <- "06-Jun-2017"
d4 <- c("August 19 (2015)", "July 1 (2015)")
d5 <- "12/30/14" # Dec 30, 2014
# TODO
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time)) %>%
mutate(dep_time = make_datetime(year, month, day, dep_time%/%100, dep_time%%100),
arr_time = make_datetime(year, month, day, arr_time%/%100, arr_time%%100),
sched_dep_time = make_datetime(year, month, day, sched_dep_time%/%100, sched_dep_time%%100),
sched_arr_time = make_datetime(year, month, day, sched_arr_time%/%100, sched_arr_time%%100)) %>%
select(-year, -month, -day)
# TODO
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = make_datetime(year, month, day, dep_time%/%100, dep_time%%100),
arr_time = make_datetime(year, month, day, arr_time%/%100, arr_time%%100),
sched_dep_time = make_datetime(year, month, day, sched_dep_time%/%100, sched_dep_time%%100),
sched_arr_time = make_datetime(year, month, day, sched_arr_time%/%100, sched_arr_time%%100)) %>%
select(-year, -month, -day)
View(flights_datetime)
# TODO
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = make_datetime(year, month, day, dep_time%/%100, dep_time%%100),
arr_time = make_datetime(year, month, day, arr_time%/%100, arr_time%%100),
sched_dep_time = make_datetime(year, month, day, sched_dep_time%/%100, sched_dep_time%%100),
sched_arr_time = make_datetime(year, month, day, sched_arr_time%/%100, sched_arr_time%%100)) %>%
select(-year, -month, -day)
sup <- flights_datetime %>%
mutate(dep_time = dep_time +1)
View(sup)
# TODO
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = make_datetime(year, month, day, dep_time%/%100, dep_time%%100),
arr_time = make_datetime(year, month, day, arr_time%/%100, arr_time%%100),
sched_dep_time = make_datetime(year, month, day, sched_dep_time%/%100, sched_dep_time%%100),
sched_arr_time = make_datetime(year, month, day, sched_arr_time%/%100, sched_arr_time%%100)) %>%
select(-year, -month, -day)
sup <- flights_datetime %>%
mutate(dep_time = dep_time + days(1))
# TODO
change_time <- function(year, month, day, time) {
make_datetime(year, month, day, time%/%100, time%%100)
}
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = change_time(year, month, day, dep_time),
arr_time = change_time(year, month, day, arr_time),
sched_dep_time = change_time(year, month, day, sched_dep_time),
sched_arr_time = change_time(year, month, day, sched_arr_time)) %>%
select(-year, -month, -day)
sup <- flights_datetime %>%
mutate(dep_time = if_else(arr_time < dep_time, dep_time+days(1), dep_time))
# TODO
change_time <- function(year, month, day, time) {
make_datetime(year, month, day, time%/%100, time%%100)
}
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = change_time(year, month, day, dep_time),
arr_time = change_time(year, month, day, arr_time),
sched_dep_time = change_time(year, month, day, sched_dep_time),
sched_arr_time = change_time(year, month, day, sched_arr_time)) %>%
select(-year, -month, -day)
sup <- flights_datetime %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
# TODO
change_time <- function(year, month, day, time) {
make_datetime(year, month, day, time%/%100, time%%100)
}
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = change_time(year, month, day, dep_time),
arr_time = change_time(year, month, day, arr_time),
sched_dep_time = change_time(year, month, day, sched_dep_time),
sched_arr_time = change_time(year, month, day, sched_arr_time)) %>%
select(-year, -month, -day)
flights_datetime <- flights_datetime %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
View(airports)
?left_join
sup = left_join(flights_datetime, airports)
sup = left_join(flights_datetime, airports, by=c("dest", "faa"))
sup = right_join(flights_datetime, airports, by=c("dest", "faa"))
timezone <- airports %>%
left_join(flights)
timezone <- airports %>%
left_join(flights, by= c("faa", "dest"))
timezone <- airports %>%
left_join(flights, by= c("dest", "faa"))
timezone <- airports %>%
left_join(flights, by= c("dest","faa"))
timezone <- airports %>%
left_join(flights, by= c("dest"="faa"))
timezone <- airports %>%
left_join(flights, by= c("faa"="dest"))
View(timezone)
timezone <- airports %>%
select(faa, tz, tzone) %>%
left_join(flights, by= c("faa"="dest"))
timezone <- airports %>%
select(faa, tz, tzone) %>%
left_join(flights, by= c("faa"="dest"))
View(timezone)
timezone <- airports %>%
select(faa, tz, tzone) %>%
right_join(flights, by= c("faa"="dest"))
timezone <- airports %>%
select(faa, tz, tzone) %>%
left_join(flights, by= c("faa"="dest"))
timezone <- airports %>%
select(faa, tz, tzone) %>%
left_join(flights_datetime, by= c("faa"="dest"))
timezone <- airports %>%
select(faa, tz, tzone) %>%
right_join(flights_datetime, by= c("faa"="dest"))
?make_datetime
make_datetime(1992, 02,19, 5,20, GMT)
make_datetime(1992, 02,19, 5,20, "GMT")
make_datetime(1992, 02,19, 5,20, -5)
make_datetime(1992, 02,19, 5,20, 24, -5)
make_datetime(1992, 02,19, 5,20, 24, "UTC")
make_datetime(1992, 02,19, 5,20, 24, "GMT")
timezone <- airports %>%
select(faa, tz, tzone)
?rename
?rename
?rename
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename(timezone = "hi")
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename(timezone = hi)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename(timezone = timzone)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename(timezone = timezone)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("timezone" = timezone)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("timezone" = "timezone")
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tz, tzone)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = change_time(year, month, day, dep_time),
arr_time = change_time(year, month, day, arr_time),
sched_dep_time = change_time(year, month, day, sched_dep_time),
sched_arr_time = change_time(year, month, day, sched_arr_time)) %>%
select(-year, -month, -day)
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tz, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time), !is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
mutate(dep_time = change_time(year, month, day, dep_time),
arr_time = change_time(year, month, day, arr_time),
sched_dep_time = change_time(year, month, day, sched_dep_time),
sched_arr_time = change_time(year, month, day, sched_arr_time)) %>%
select(-year, -month, -day)
flights_datetime %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tz, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day)
flights_datetime <- flights_datetime %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day)
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tz, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>% select(-year, -month, -day)
flights_datetime <- flights_datetime %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
flights_datetime %>% select(-year, -month, -day)
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tz, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day)
timezone <- airports %>%
select(faa, tzone)
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day)
make_datetime(1995,02,13,05,20,0,"America/New_York")
flights_datetime$dep_time
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
timezone <- airports %>%
select(faa, tzone)
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day) %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
# Select timezone from `airports`
timezone <- airports %>%
select(faa, tzone)
# Join tables
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day, -origin_tzone, -dest_tzone) %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(arr_time < dep_time, sched_arr_time+days(1), sched_arr_time))
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
# Select timezone from `airports`
timezone <- airports %>%
select(faa, tzone)
# Join tables so that timezones are in the flights table
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
# Create correct time (including timezone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day, -origin_tzone, -dest_tzone) %>%
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(sched_arr_time < sched_dep_time, sched_arr_time+days(1), sched_arr_time))
# TODO
change_time <- function(year, month, day, time, tz) {
make_datetime(year, month, day, time%/%100, time%%100, 0, tz)
}
# Select timezone from `airports`
timezone <- airports %>%
select(faa, tzone)
# Join tables so that timezones are in the flights table
flights_datetime <- flights %>%
filter(!is.na(dep_time), !is.na(arr_time),
!is.na(sched_dep_time), !is.na(sched_arr_time)) %>%
left_join(timezone, by = c("origin"="faa")) %>%
rename("origin_tzone" = tzone) %>%
left_join(timezone, by = c("dest" = "faa")) %>%
rename("dest_tzone" = tzone)
# Create correct time (including timezone)
flights_datetime <- flights_datetime %>%
mutate(dep_time = change_time(year, month, day, dep_time, origin_tzone),
arr_time = change_time(year, month, day, arr_time, dest_tzone),
sched_dep_time = change_time(year, month, day, sched_dep_time, origin_tzone),
sched_arr_time = change_time(year, month, day, sched_arr_time, dest_tzone)) %>%
select(-year, -month, -day, -origin_tzone, -dest_tzone) %>%
# Fix overnight error
mutate(arr_time = if_else(arr_time < dep_time, arr_time+days(1), arr_time),
sched_arr_time = if_else(sched_arr_time < sched_dep_time, sched_arr_time+days(1), sched_arr_time))
install.packages("rmarkdown")
update.packages("rmarkdown")
install.packages("rmarkdown")
setwd("~/Google Drive/UBC MDS - Course Material/Block_3/DSCI_522/data_analysis_pipeline_eg/doc")
rmarkdown::render("doc/count_report.Rmd")
rmarkdown::render("doc/count_report.Rmd")
rmarkdown::render("count_report.Rmd")
.libPaths(
)
setwd("~/Google Drive/UBC MDS - Course Material/Block_3/DSCI_522/sylvia_patrick_Titanic_Survival_ML/docs")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = here::here())
df <- read.csv("../results/test_prediction.csv")
df <- read.csv("../results/test_prediction.csv")
df <- read.csv("../results/test_prediction.csv")
df <- read.csv("results/test_prediction.csv")
print(df)
print(accuracies)
accuracies <- read.csv("results/accuracies.csv")
print(accuracies)
rank <- read.csv("results/feature_ranks.csv")
print(rank)
library(here)
package.version(here)
package.version("here")
install.packages("imager")
packageVersion("here")
packageVersion(here)
packageVersion("imager")
knitr::opts_chunk$set(echo = FALSE)
#knitr::opts_knit$set(root.dir = here::here())
library(here)
library(imager)
accuracies <- read.csv(here::here("results/accuracies.csv"))
knitr::kable(accuracies)
train_prediction <- read.csv(here::here("results/train_prediction.csv"))
test_prediction <- read.csv(here::here("results/test_prediction.csv"))
knitr::kable(head(train_prediction, 10))
knitr::kable(head(test_prediction, 10))
rank <- read.csv(here::here("results/feature_ranks.csv"))
knitr::kable(rank)
here()
knitr::opts_chunk$set(echo = FALSE)
#knitr::opts_knit$set(root.dir = here::here())
library(here)
library(imager)
knitr::include_graphics(here::here("results/figure/Age_plot.png"))
#knitr::include_graphics(here::here("results/figure/Age_plot.png"))
knitr::include_graphics("results/figure/Age_plot.png")
#knitr::include_graphics(here::here("results/figure/Age_plot.png"))
knitr::include_graphics("results/figure/Age_plot.png")
#knitr::include_graphics(here::here("results/figure/Age_plot.png"))
knitr::include_graphics("results/figure/Age_plot.png")
rank <- read.csv(here::here("results/feature_ranks.csv"))
knitr::kable(rank)
knitr::include_graphics(here::here("results/decision_tree.png"))
setwd("~/Google Drive/UBC MDS - Course Material/Block_3/DSCI_522/sylvia_patrick_Titanic_Survival_ML/docs")
setwd("~/Google Drive/UBC MDS - Course Material/Block_3/DSCI_522/sylvia_patrick_Titanic_Survival_ML/docs")
